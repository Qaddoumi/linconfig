# Check systemd failed services
echo -e "• Use systemctl --failed to check failed services"

# Log files check
echo -e "• Use sudo journalctl -p 3 -xb to check log files"

# Update databases and upgrade packages
echo "• when using yay -Syu, it will update both pacman and yay"
# sudo pacman -Syu
yay -Syu

#Delete Pacman Cache
sudo pacman -Sc

# Delete Yay Cache
yay -Sc

# Delete unwanted dependencies
echo "• Use yay -Ps to see yay statistics"
echo "• Use yay -Yc to clean unneeded dependencies"
yay -Yc

# Remove Orphan packages if exists
if pacman -Qtdq > /dev/null 2>&1; then
	sudo pacman -Rns $(pacman -Qtdq)
fi

# Clean user cache
rm -rf ~/.cache/*

# Clean the journal (pacman logs and system logs)
sudo journalctl --vacuum-size=100M  # Keep only 100MB
sudo journalctl --vacuum-time=2weeks  # Keep only 2 weeks

# refresh the mirror list (-a for age, 24 hours)
# you can add -n 20 to limit the number of mirrors to 20
# sudo reflector -c Germany -a 24 --sort rate --save /etc/pacman.d/mirrorlist
sudo reflector --country Germany,France,Netherlands --protocol https --age 12 --sort rate --save /etc/pacman.d/mirrorlist